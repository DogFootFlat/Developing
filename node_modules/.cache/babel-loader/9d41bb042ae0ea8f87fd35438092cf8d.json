{"ast":null,"code":"import{FormControl,InputLabel,MenuItem,Select}from'@mui/material';import React,{useState,useEffect,useCallback}from'react';import classes from'./css/ProductFilters.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductFilters=/*#__PURE__*/React.memo(_ref=>{var _items$find,_items$find2,_items$find3;let{id,items,queryObj,onChange}=_ref;const majorKey=items===null||items===void 0?void 0:(_items$find=items.find(x=>{var _x$id;return(_x$id=x.id)===null||_x$id===void 0?void 0:_x$id.includes('major');}))===null||_items$find===void 0?void 0:_items$find.id;const minorKey=items===null||items===void 0?void 0:(_items$find2=items.find(x=>{var _x$id2;return(_x$id2=x.id)===null||_x$id2===void 0?void 0:_x$id2.includes('minor');}))===null||_items$find2===void 0?void 0:_items$find2.id;const minorObj=items===null||items===void 0?void 0:(_items$find3=items.find(x=>x.id===minorKey))===null||_items$find3===void 0?void 0:_items$find3.list_obj;const[localQuery,setLocalQuery]=useState(queryObj);const[minorFilter,setMinorFilter]=useState([]);useEffect(()=>{setLocalQuery(queryObj);},[queryObj]);useEffect(()=>{if(localQuery[majorKey]||localQuery[majorKey]===''){setMinorFilter(minorObj[localQuery[majorKey]]||[]);}},[localQuery,majorKey,minorObj]);const onChangeHandler=useCallback((filter_id,event)=>{const value=event.target.value;setLocalQuery(prevQuery=>{const updatedQuery={...prevQuery,[filter_id]:value};if(filter_id===majorKey){updatedQuery[minorKey]='';}return updatedQuery;});onChange(filter_id,value);if(localQuery[majorKey]&&filter_id===minorKey){onChange(id,value===''?'':`${localQuery[majorKey]}0${value}`);}if(filter_id===majorKey&&value===''){onChange(id,'');}},[localQuery,majorKey,minorKey,id,onChange]);return/*#__PURE__*/_jsx(\"div\",{className:classes['form-div'],style:{marginBottom:'1em'},children:items.map(filter=>{var _ref2;return/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",className:classes['form-control'],children:[/*#__PURE__*/_jsx(InputLabel,{id:`${filter.id}-label`,children:filter.name}),/*#__PURE__*/_jsxs(Select,{labelId:`${filter.id}-label`,displayEmpty:true,id:filter.id,value:localQuery[filter.id]||'',onChange:event=>onChangeHandler(filter.id,event),sx:{textAlign:'right'},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"\\uC804\\uCCB4\"}),(_ref2=filter.id===minorKey?minorFilter:filter.list)===null||_ref2===void 0?void 0:_ref2.map(menu_item=>/*#__PURE__*/_jsx(MenuItem,{value:menu_item.value,children:menu_item.label},menu_item.value))]})]},filter.id);})});});export default ProductFilters;","map":{"version":3,"names":["FormControl","InputLabel","MenuItem","Select","React","useState","useEffect","useCallback","classes","ProductFilters","memo","id","items","queryObj","onChange","majorKey","find","x","includes","minorKey","minorObj","list_obj","localQuery","setLocalQuery","minorFilter","setMinorFilter","onChangeHandler","filter_id","event","value","target","prevQuery","updatedQuery","marginBottom","map","filter","name","textAlign","list","menu_item","label"],"sources":["C:/OtpishiAI/src/components/product/products/productForm/ProductFilters.jsx"],"sourcesContent":["import { FormControl, InputLabel, MenuItem, Select } from '@mui/material';\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport classes from './css/ProductFilters.module.css';\r\n\r\nconst ProductFilters = React.memo(({ id, items, queryObj, onChange }) => {\r\n  const majorKey = items?.find((x) => x.id?.includes('major'))?.id;\r\n  const minorKey = items?.find((x) => x.id?.includes('minor'))?.id;\r\n  const minorObj = items?.find((x) => x.id === minorKey)?.list_obj;\r\n\r\n  const [localQuery, setLocalQuery] = useState(queryObj);\r\n  const [minorFilter, setMinorFilter] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setLocalQuery(queryObj);\r\n  }, [queryObj]);\r\n\r\n  useEffect(() => {\r\n    if (localQuery[majorKey] || localQuery[majorKey] === '') {\r\n      setMinorFilter(minorObj[localQuery[majorKey]] || []);\r\n    }\r\n  }, [localQuery, majorKey, minorObj]);\r\n\r\n  const onChangeHandler = useCallback(\r\n    (filter_id, event) => {\r\n      const value = event.target.value;\r\n      setLocalQuery((prevQuery) => {\r\n        const updatedQuery = { ...prevQuery, [filter_id]: value };\r\n        if (filter_id === majorKey) {\r\n          updatedQuery[minorKey] = '';\r\n        }\r\n        return updatedQuery;\r\n      });\r\n      onChange(filter_id, value);\r\n      if (localQuery[majorKey] && filter_id === minorKey) {\r\n        onChange(id, value === '' ? '' : `${localQuery[majorKey]}0${value}`);\r\n      }\r\n      if (filter_id === majorKey && value === '') {\r\n        onChange(id, '');\r\n      }\r\n    },\r\n    [localQuery, majorKey, minorKey, id, onChange]\r\n  );\r\n\r\n  return (\r\n    <div className={classes['form-div']} style={{ marginBottom: '1em' }}>\r\n      {items.map((filter) => (\r\n        <FormControl key={filter.id} variant=\"outlined\" className={classes['form-control']}>\r\n          <InputLabel id={`${filter.id}-label`}>{filter.name}</InputLabel>\r\n          <Select\r\n            labelId={`${filter.id}-label`}\r\n            displayEmpty\r\n            id={filter.id}\r\n            value={localQuery[filter.id] || ''}\r\n            onChange={(event) => onChangeHandler(filter.id, event)}\r\n            sx={{ textAlign: 'right' }}\r\n          >\r\n            <MenuItem value=\"\">전체</MenuItem>\r\n            {(filter.id === minorKey ? minorFilter : filter.list)?.map((menu_item) => (\r\n              <MenuItem key={menu_item.value} value={menu_item.value}>\r\n                {menu_item.label}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n      ))}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default ProductFilters;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}