{"ast":null,"code":"import _regeneratorRuntime from\"C:/OtpishiAI/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/OtpishiAI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/OtpishiAI/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import GoogleIcon from'@mui/icons-material/Google';import{Box,Button,Card,CardMedia,Typography}from'@mui/material';import React,{useContext,useEffect,useState}from'react';import{useNavigate}from'react-router';import ApiService from'../../ApiService';import NaverIcon from'../../assets/naver_icon/NaverIcon';import lightLogo from'../../img/OtPishAI_light.png';import AuthContext from'../../store/auth-context';import Loading from'../basic/Loading';import logincss from'./css/login.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){document.body.style.backgroundColor='#f0f8f9';var navigate=useNavigate();var ctx=useContext(AuthContext);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];useEffect(function(){ctx.setCurrentPage('add-user');},[]);var addUserHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var site_name,url,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setIsLoading(true);setError(null);site_name=event.nativeEvent.submitter.name;ctx.setLoginMethod(site_name=='google'?'Google':'Naver');_context.prev=5;_context.next=8;return ApiService.getSignInUrl(site_name);case 8:url=_context.sent;_context.next=11;return ApiService.signIn(url===null||url===void 0?void 0:url.data);case 11:response=_context.sent;if(!(response.status<200||response.status>299)){_context.next=14;break;}throw new Error('Something went wrong!');case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](5);setError(_context.t0.message);case 19:setIsLoading(false);case 20:case\"end\":return _context.stop();}}},_callee,null,[[5,16]]);}));return function addUserHandler(_x){return _ref.apply(this,arguments);};}();var content=/*#__PURE__*/_jsx(Box,{className:logincss.box,children:/*#__PURE__*/_jsxs(\"form\",{className:logincss.form,onSubmit:addUserHandler,children:[/*#__PURE__*/_jsx(Card,{className:\"\".concat(logincss.card,\" \").concat(logincss.cardHeader),children:/*#__PURE__*/_jsx(CardMedia,{className:logincss.logo,component:\"img\",image:lightLogo,alt:\"OtpishAI Light Logo\"})}),/*#__PURE__*/_jsxs(Card,{className:\"\".concat(logincss.card,\" \").concat(logincss.cardHalf,\" \").concat(logincss.cardLeft),children:[/*#__PURE__*/_jsx(Typography,{className:logincss.typo,variant:\"h4\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Box,{variant:\"outlined\",sx:{padding:'0 1em',width:'fit-content',height:'fit-content',borderColor:'#12b8de',border:'none',borderLeft:'4px solid #12b9de6b'},children:/*#__PURE__*/_jsx(Typography,{className:\"\".concat(logincss.typo,\" \").concat(logincss.primaryDarkerFont),variant:\"h6\",children:\"Google \\uB610\\uB294 Naver \\uACC4\\uC815 \\uC0AC\\uC6A9\"})})]}),/*#__PURE__*/_jsx(Card,{className:\"\".concat(logincss.card,\" \").concat(logincss.cardHalf,\" \").concat(logincss.cardRight),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{className:\"\".concat(logincss.signupBtn,\" \").concat(logincss.googleBtn),variant:\"contained\",component:Button,type:\"submit\",name:\"google\",startIcon:/*#__PURE__*/_jsx(GoogleIcon,{}),children:\"\\uAD6C\\uAE00\\uB85C \\uD68C\\uC6D0\\uAC00\\uC785 / \\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Button,{className:\"\".concat(logincss.signupBtn,\" \").concat(logincss.naverBtn),variant:\"contained\",component:Button,type:\"submit\",name:\"naver\",startIcon:/*#__PURE__*/_jsx(NaverIcon,{}),children:\"\\uB124\\uC774\\uBC84\\uB85C \\uD68C\\uC6D0\\uAC00\\uC785 / \\uB85C\\uADF8\\uC778\"})]})})]})});if(error){content=/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:error})});}if(isLoading){content=/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsx(_Fragment,{children:content});};export default Login;","map":{"version":3,"names":["GoogleIcon","Box","Button","Card","CardMedia","Typography","React","useContext","useEffect","useState","useNavigate","ApiService","NaverIcon","lightLogo","AuthContext","Loading","logincss","Login","document","body","style","backgroundColor","navigate","ctx","error","setError","isLoading","setIsLoading","setCurrentPage","addUserHandler","event","preventDefault","site_name","nativeEvent","submitter","name","setLoginMethod","getSignInUrl","url","signIn","data","response","status","Error","message","content","box","form","card","cardHeader","logo","cardHalf","cardLeft","typo","padding","width","height","borderColor","border","borderLeft","primaryDarkerFont","cardRight","signupBtn","googleBtn","naverBtn"],"sources":["C:/OtpishiAI/src/components/login/Login.jsx"],"sourcesContent":["import GoogleIcon from '@mui/icons-material/Google';\r\nimport { Box, Button, Card, CardMedia, Typography } from '@mui/material';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router';\r\nimport ApiService from '../../ApiService';\r\nimport NaverIcon from '../../assets/naver_icon/NaverIcon';\r\nimport lightLogo from '../../img/OtPishAI_light.png';\r\nimport AuthContext from '../../store/auth-context';\r\nimport Loading from '../basic/Loading';\r\nimport logincss from './css/login.module.css';\r\n\r\nconst Login = () => {\r\n  document.body.style.backgroundColor = '#f0f8f9';\r\n\r\n  const navigate = useNavigate();\r\n  const ctx = useContext(AuthContext);\r\n\r\n  const [error, setError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    ctx.setCurrentPage('add-user');\r\n  }, []);\r\n\r\n  const addUserHandler = async (event) => {\r\n    event.preventDefault();\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    const site_name = event.nativeEvent.submitter.name;\r\n    ctx.setLoginMethod(site_name == 'google' ? 'Google' : 'Naver')\r\n\r\n    try {\r\n      const url = await ApiService.getSignInUrl(site_name);\r\n      const response = await ApiService.signIn(url?.data);\r\n      if (response.status < 200 || response.status > 299) {\r\n        throw new Error('Something went wrong!');\r\n      }\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  let content = (\r\n    <Box className={logincss.box}>\r\n      <form className={logincss.form} onSubmit={addUserHandler}>\r\n        <Card className={`${logincss.card} ${logincss.cardHeader}`}>\r\n          <CardMedia className={logincss.logo} component=\"img\" image={lightLogo} alt=\"OtpishAI Light Logo\" />\r\n        </Card>\r\n        <Card className={`${logincss.card} ${logincss.cardHalf} ${logincss.cardLeft}`}>\r\n          <Typography className={logincss.typo} variant=\"h4\">\r\n            로그인\r\n          </Typography>\r\n          <Box\r\n            variant=\"outlined\"\r\n            sx={{\r\n              padding: '0 1em',\r\n              width: 'fit-content',\r\n              height: 'fit-content',\r\n              borderColor: '#12b8de',\r\n              border: 'none',\r\n              borderLeft: '4px solid #12b9de6b',\r\n            }}\r\n          >\r\n            <Typography className={`${logincss.typo} ${logincss.primaryDarkerFont}`} variant=\"h6\">\r\n              Google 또는 Naver 계정 사용\r\n            </Typography>\r\n          </Box>\r\n        </Card>\r\n        <Card className={`${logincss.card} ${logincss.cardHalf} ${logincss.cardRight}`}>\r\n          <div>\r\n            <Button\r\n              className={`${logincss.signupBtn} ${logincss.googleBtn}`}\r\n              variant=\"contained\"\r\n              component={Button}\r\n              type=\"submit\"\r\n              name=\"google\"\r\n              startIcon={<GoogleIcon />}\r\n            >\r\n              구글로 회원가입 / 로그인\r\n            </Button>\r\n            <Button\r\n              className={`${logincss.signupBtn} ${logincss.naverBtn}`}\r\n              variant=\"contained\"\r\n              component={Button}\r\n              type=\"submit\"\r\n              name=\"naver\"\r\n              startIcon={<NaverIcon />}\r\n            >\r\n              네이버로 회원가입 / 로그인\r\n            </Button>\r\n          </div>\r\n        </Card>\r\n      </form>\r\n    </Box>\r\n  );\r\n  if (error) {\r\n    content = (\r\n      <div>\r\n        <p>{error}</p>\r\n      </div>\r\n    );\r\n  }\r\n  if (isLoading) {\r\n    content = <Loading />;\r\n  }\r\n\r\n  return <>{content}</>;\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}