{"ast":null,"code":"var _jsxFileName = \"C:\\\\OtpishiAI\\\\src\\\\components\\\\book\\\\LoanCount.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext, useCallback } from \"react\";\nimport { useNavigate } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport ApiService from \"../../ApiService\";\nimport AuthContext from \"../../store/auth-context\";\nimport Card from \"../basic/Card\";\nimport LoanFilter from \"./LoanFilter\";\nimport LoanChart from \"./LoanChart\";\nimport LoanList from \"./LoanList\";\nimport Loading from \"../basic/Loading\";\nimport { Typography } from \"@mui/material\";\nimport loancountcss from \"./css/loancount.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LoanCount = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const ctx = useContext(AuthContext);\n  const [books, setBooks] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [filteredCategory, setFilteredCategory] = useState(\"all\");\n\n  const filterChangeHandler = selectedCategory => {\n    setFilteredCategory(selectedCategory);\n  };\n\n  const fetchBooksHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await ApiService.fetchBooks();\n\n      if (response.status < 200 || response.status > 299) {\n        throw new Error(\"Something went wrong!\");\n      }\n\n      const data = await response.data;\n      setBooks(data);\n    } catch (error) {\n      setError(error.message);\n    }\n\n    setIsLoading(false);\n  }, []);\n  useEffect(() => {\n    fetchBooksHandler();\n    ctx.setCurrentPage(\"loan-count\");\n  }, [fetchBooksHandler]);\n  const filteredBooks = books;\n\n  if (filteredCategory !== \"all\") {\n    filteredBooks = books.filter(book => {\n      return book.category === filteredCategory;\n    });\n  }\n\n  let content = /*#__PURE__*/_jsxDEV(\"h5\", {\n    children: \"\\uD604\\uC7AC \\uB3C4\\uC11C \\uBAA9\\uB85D\\uC774 \\uBE44\\uC5B4\\uC788\\uC2B5\\uB2C8\\uB2E4.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 17\n  }, this);\n\n  if (books.length > 0) {\n    content = /*#__PURE__*/_jsxDEV(Card, {\n      className: loancountcss.chart,\n      children: [/*#__PURE__*/_jsxDEV(LoanFilter, {\n        selected: filteredCategory,\n        onChangeFilter: filterChangeHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoanChart, {\n        books: filteredBooks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoanList, {\n        items: filteredBooks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (error) {\n    content = /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (isLoading) {\n    content = /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        className: loancountcss.typo,\n        variant: \"h6\",\n        children: \"\\uB3C4\\uC11C \\uB300\\uC5EC \\uD1B5\\uACC4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), content]\n  }, void 0, true);\n};\n\n_s(LoanCount, \"ki/gaMZZ7VEfkR+HUje7SHcNjGQ=\", false, function () {\n  return [useNavigate];\n});\n\n_c = LoanCount;\nexport default LoanCount;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoanCount\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","useNavigate","Link","ApiService","AuthContext","Card","LoanFilter","LoanChart","LoanList","Loading","Typography","loancountcss","LoanCount","navigate","ctx","books","setBooks","isLoading","setIsLoading","error","setError","filteredCategory","setFilteredCategory","filterChangeHandler","selectedCategory","fetchBooksHandler","response","fetchBooks","status","Error","data","message","setCurrentPage","filteredBooks","filter","book","category","content","length","chart","typo"],"sources":["C:/OtpishiAI/src/components/book/LoanCount.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ApiService from \"../../ApiService\";\r\nimport AuthContext from \"../../store/auth-context\";\r\nimport Card from \"../basic/Card\";\r\nimport LoanFilter from \"./LoanFilter\";\r\nimport LoanChart from \"./LoanChart\";\r\nimport LoanList from \"./LoanList\";\r\nimport Loading from \"../basic/Loading\";\r\nimport { Typography } from \"@mui/material\";\r\nimport loancountcss from \"./css/loancount.module.css\";\r\n\r\nconst LoanCount = () => {\r\n  const navigate = useNavigate();\r\n  const ctx = useContext(AuthContext);\r\n\r\n  const [books, setBooks] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [filteredCategory, setFilteredCategory] = useState(\"all\");\r\n  const filterChangeHandler = (selectedCategory) => {\r\n    setFilteredCategory(selectedCategory);\r\n  }\r\n\r\n  const fetchBooksHandler = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ApiService.fetchBooks();\r\n      if (response.status < 200 || response.status > 299) {\r\n        throw new Error(\"Something went wrong!\");\r\n      }\r\n      const data = await response.data;\r\n      setBooks(data);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchBooksHandler();\r\n    ctx.setCurrentPage(\"loan-count\");\r\n  }, [fetchBooksHandler]);\r\n\r\n  const filteredBooks = books;\r\n  if (filteredCategory !== \"all\") {\r\n    filteredBooks = books.filter((book) => {\r\n      return book.category === filteredCategory;\r\n    });\r\n  }\r\n\r\n  let content = <h5>현재 도서 목록이 비어있습니다.</h5>;\r\n  if (books.length > 0) {\r\n    content = (\r\n      <Card className={loancountcss.chart}>\r\n        <LoanFilter\r\n          selected={filteredCategory}\r\n          onChangeFilter={filterChangeHandler}\r\n        />\r\n        <LoanChart books={filteredBooks} />\r\n        <LoanList items={filteredBooks} />\r\n      </Card>\r\n    );\r\n  }\r\n  if (error) {\r\n    content = (\r\n      <div>\r\n        <p>{error}</p>\r\n      </div>\r\n    );\r\n  }\r\n  if (isLoading) {\r\n    content = <Loading />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section>\r\n        <Typography className={loancountcss.typo} variant=\"h6\">\r\n          도서 대여 통계\r\n        </Typography>\r\n      </section>\r\n      {content}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoanCount;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}