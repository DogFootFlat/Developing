{"ast":null,"code":"import{useState,useContext}from'react';import{Link}from'react-router-dom';import CartContext from'../../../../store/cart-context';import ProductItemForm from'./ProductItemForm';import classes from'./css/ProductItem.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ProductItem=props=>{const[selectedSize,setSelectedSize]=useState('');const cartCtx=useContext(CartContext);const addToCartHandler=amount=>{if(props.sizes&&props.sizes.length>0&&!selectedSize){alert('사이즈를 선택해주세요.');return;}cartCtx.addItem({id:props.id,name:props.name,amount:amount,price:props.rprice>0?props.rprice:props.oprice,size:selectedSize||'One Size'});};const handleSizeSelect=size=>{setSelectedSize(size);};return/*#__PURE__*/_jsxs(\"li\",{className:classes.productCard,children:[/*#__PURE__*/_jsx(Link,{to:`/product/${props.num}`,className:classes.productLink,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.productContent,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.imageContainer,children:/*#__PURE__*/_jsx(\"img\",{src:props.img,alt:props.name,className:classes.productImage})}),/*#__PURE__*/_jsx(\"h3\",{className:classes.productName,children:props.name}),props.productInfo&&/*#__PURE__*/_jsx(\"div\",{className:classes.description,children:props.productInfo}),/*#__PURE__*/_jsx(\"div\",{className:classes.priceSection,children:props.rprice>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.originalPrice,children:[props.oprice.toLocaleString(),\" \\uC6D0\"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.discountWrapper,children:[/*#__PURE__*/_jsxs(\"span\",{className:classes.discountPercentage,children:[Math.round((props.oprice-props.rprice)/props.oprice*100),\"%\"]}),/*#__PURE__*/_jsxs(\"span\",{className:classes.salePrice,children:[props.rprice.toLocaleString(),\" \\uC6D0\"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:classes.salePrice,children:[props.oprice.toLocaleString(),\" \\uC6D0\"]})})]})}),props.sizes&&props.sizes.length>0&&/*#__PURE__*/_jsx(\"div\",{className:classes.sizeSelection,children:props.sizes.map(size=>/*#__PURE__*/_jsx(\"button\",{className:`${classes.sizeButton} ${selectedSize===size?classes.selectedSize:''}`,onClick:()=>handleSizeSelect(size),children:size},size))}),/*#__PURE__*/_jsx(ProductItemForm,{id:props.id,onAddToCart:addToCartHandler,disabled:props.sizes&&props.sizes.length>0&&!selectedSize})]});};export default ProductItem;","map":{"version":3,"names":["useState","useContext","Link","CartContext","ProductItemForm","classes","ProductItem","props","selectedSize","setSelectedSize","cartCtx","addToCartHandler","amount","sizes","length","alert","addItem","id","name","price","rprice","oprice","size","handleSizeSelect","productCard","num","productLink","productContent","imageContainer","img","productImage","productName","productInfo","description","priceSection","originalPrice","toLocaleString","discountWrapper","discountPercentage","Math","round","salePrice","sizeSelection","map","sizeButton"],"sources":["C:/OtpishiAI/src/components/product/products/productItem/ProductItem.jsx"],"sourcesContent":["import { useState, useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport CartContext from '../../../../store/cart-context';\r\nimport ProductItemForm from './ProductItemForm';\r\nimport classes from './css/ProductItem.module.css';\r\n\r\nconst ProductItem = (props) => {\r\n  const [selectedSize, setSelectedSize] = useState('');\r\n  const cartCtx = useContext(CartContext);\r\n\r\n  const addToCartHandler = (amount) => {\r\n    if (props.sizes && props.sizes.length > 0 && !selectedSize) {\r\n      alert('사이즈를 선택해주세요.');\r\n      return;\r\n    }\r\n    cartCtx.addItem({\r\n      id: props.id,\r\n      name: props.name,\r\n      amount: amount,\r\n      price: props.rprice > 0 ? props.rprice : props.oprice,\r\n      size: selectedSize || 'One Size',\r\n    });\r\n  };\r\n\r\n  const handleSizeSelect = (size) => {\r\n    setSelectedSize(size);\r\n  };\r\n\r\n  return (\r\n    <li className={classes.productCard}>\r\n      <Link to={`/product/${props.num}`} className={classes.productLink}>\r\n        <div className={classes.productContent}>\r\n          <div className={classes.imageContainer}>\r\n            <img src={props.img} alt={props.name} className={classes.productImage} />\r\n          </div>\r\n          <h3 className={classes.productName}>{props.name}</h3>\r\n          {props.productInfo && <div className={classes.description}>{props.productInfo}</div>}\r\n          <div className={classes.priceSection}>\r\n            {props.rprice > 0 ? (\r\n              <>\r\n                <div className={classes.originalPrice}>{props.oprice.toLocaleString()} 원</div>\r\n                <div className={classes.discountWrapper}>\r\n                  <span className={classes.discountPercentage}>\r\n                    {Math.round(((props.oprice - props.rprice) / props.oprice) * 100)}%\r\n                  </span>\r\n                  <span className={classes.salePrice}>{props.rprice.toLocaleString()} 원</span>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <div className={classes.salePrice}>{props.oprice.toLocaleString()} 원</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </Link>\r\n      {props.sizes && props.sizes.length > 0 && (\r\n        <div className={classes.sizeSelection}>\r\n          {props.sizes.map((size) => (\r\n            <button\r\n              key={size}\r\n              className={`${classes.sizeButton} ${selectedSize === size ? classes.selectedSize : ''}`}\r\n              onClick={() => handleSizeSelect(size)}\r\n            >\r\n              {size}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <ProductItemForm id={props.id} onAddToCart={addToCartHandler} disabled={props.sizes && props.sizes.length > 0 && !selectedSize} />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ProductItem;"],"mappings":"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"},"metadata":{},"sourceType":"module"}