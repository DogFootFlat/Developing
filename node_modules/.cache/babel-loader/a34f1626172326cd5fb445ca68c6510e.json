{"ast":null,"code":"import _regeneratorRuntime from\"C:/OtpishiAI/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/OtpishiAI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/OtpishiAI/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from'react';import{Link}from'react-router-dom';import HomeHeader from'./HomeHeader';// Header 컴포넌트 import\nimport ApiService from'../../ApiService';// ApiService 경로에 맞게 조정\nimport closetImage from'../../assets/closet.jpg';import classes from'./css/home.module.css';// CSS 모듈 임포트\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),featuredProducts=_useState2[0],setFeaturedProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var fetchProductsHandler=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _response$data,response,data,sortedProducts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return ApiService.fetchProducts();case 5:response=_context.sent;if(!(response.status<200||response.status>=300)){_context.next=8;break;}throw new Error('Something went wrong!');case 8:data=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.content)||[];// judge가 높은 상품을 찾기\nsortedProducts=data.filter(function(product){return product.judge!=='NULL';})// judge가 NULL이 아닌 상품만 필터링\n.sort(function(a,b){return b.judge-a.judge;})// judge 기준 내림차순 정렬\n.slice(0,3);// 상위 3개 상품만 선택\nif(sortedProducts.length===0){// judge가 NULL인 경우 첫 3개 상품 선택\nsetFeaturedProducts(data.slice(0,3));}else{setFeaturedProducts(sortedProducts);}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);setError(_context.t0.message||'Failed to fetch products');case 16:_context.prev=16;setIsLoading(false);return _context.finish(16);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,13,16,19]]);})),[]);useEffect(function(){fetchProductsHandler();},[fetchProductsHandler]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.homeContainer,children:[/*#__PURE__*/_jsx(HomeHeader,{}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:classes.banner,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.overlay}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC637\\uD53C\\uC15C. \\uC138\\uC0C1\\uC5D0 \\uC5C6\\uB358 AI \\uC1FC\\uD551\\uBAB0\"}),/*#__PURE__*/_jsx(\"img\",{src:closetImage,alt:\"A table full of delicious food!\",className:classes.bannerImage})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.categoryMenu,children:[/*#__PURE__*/_jsx(Link,{to:\"/prod-list\",children:\"\\uC0C1\\uD488\\uBAA9\\uB85D\"}),/*#__PURE__*/_jsx(Link,{to:\"/category2\",children:\"\\uCE74\\uD14C\\uACE0\\uB9AC 2\"}),/*#__PURE__*/_jsx(Link,{to:\"/category3\",children:\"\\uCE74\\uD14C\\uACE0\\uB9AC 3\"}),/*#__PURE__*/_jsx(Link,{to:\"/category4\",children:\"\\uCE74\\uD14C\\uACE0\\uB9AC 4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.featuredProducts,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uCD94\\uCC9C \\uC0C1\\uD488\"}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"\\uB85C\\uB529 \\uC911...\"}),error&&/*#__PURE__*/_jsx(\"p\",{children:error}),!isLoading&&!error&&/*#__PURE__*/_jsx(\"div\",{className:classes.productList,children:featuredProducts.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:classes.productCard,children:[/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(product.productCode),className:classes.imageContainer,children:/*#__PURE__*/_jsx(\"img\",{src:product.productImg[0],alt:product.productName,className:classes.productImage})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.productContent,children:[/*#__PURE__*/_jsx(\"h3\",{className:classes.productName,children:product.productName}),/*#__PURE__*/_jsx(\"div\",{className:classes.priceSection,children:product.rprice>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.originalPrice,children:[product.oprice.toLocaleString(),\" \\uC6D0\"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.discountWrapper,children:[/*#__PURE__*/_jsxs(\"span\",{className:classes.discountPercentage,children:[Math.round((product.oprice-product.rprice)/product.oprice*100),\"%\"]}),/*#__PURE__*/_jsxs(\"span\",{className:classes.salePrice,children:[product.rprice.toLocaleString(),\" \\uC6D0\"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:classes.salePrice,children:[product.oprice.toLocaleString(),\" \\uC6D0\"]})})]})]},product.productCode);})})]}),/*#__PURE__*/_jsx(\"footer\",{className:classes.footer,children:/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2024 \\uC637\\uD53C\\uC15C. All rights reserved.\"})})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","useCallback","Link","HomeHeader","ApiService","closetImage","classes","Home","featuredProducts","setFeaturedProducts","isLoading","setIsLoading","error","setError","fetchProductsHandler","fetchProducts","response","status","Error","data","content","sortedProducts","filter","product","judge","sort","a","b","slice","length","message","homeContainer","banner","overlay","bannerImage","categoryMenu","productList","map","productCard","productCode","imageContainer","productImg","productName","productImage","productContent","priceSection","rprice","originalPrice","oprice","toLocaleString","discountWrapper","discountPercentage","Math","round","salePrice","footer"],"sources":["C:/OtpishiAI/src/components/home/Home.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport HomeHeader from './HomeHeader'; // Header 컴포넌트 import\r\nimport ApiService from '../../ApiService'; // ApiService 경로에 맞게 조정\r\nimport closetImage from '../../assets/closet.jpg';\r\nimport classes from './css/home.module.css'; // CSS 모듈 임포트\r\n\r\nconst Home = () => {\r\n  const [featuredProducts, setFeaturedProducts] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchProductsHandler = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ApiService.fetchProducts(); // queryString 없이 fetch\r\n      if (response.status < 200 || response.status >= 300) {\r\n        throw new Error('Something went wrong!');\r\n      }\r\n      const data = response.data?.content || [];\r\n\r\n      // judge가 높은 상품을 찾기\r\n      const sortedProducts = data\r\n        .filter((product) => product.judge !== 'NULL') // judge가 NULL이 아닌 상품만 필터링\r\n        .sort((a, b) => b.judge - a.judge) // judge 기준 내림차순 정렬\r\n        .slice(0, 3); // 상위 3개 상품만 선택\r\n\r\n      if (sortedProducts.length === 0) {\r\n        // judge가 NULL인 경우 첫 3개 상품 선택\r\n        setFeaturedProducts(data.slice(0, 3));\r\n      } else {\r\n        setFeaturedProducts(sortedProducts);\r\n      }\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to fetch products');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchProductsHandler();\r\n  }, [fetchProductsHandler]);\r\n\r\n  return (\r\n    <div className={classes.homeContainer}>\r\n      {/* 헤더 */}\r\n      <HomeHeader /> {/* Header 컴포넌트 호출 */}\r\n      {/* 배너 섹션 */}\r\n      <div className={classes.banner}>\r\n        <div className={classes.overlay}></div>\r\n        <h2>옷피셜. 세상에 없던 AI 쇼핑몰</h2>\r\n        <img src={closetImage} alt=\"A table full of delicious food!\" className={classes.bannerImage} />\r\n      </div>\r\n      {/* 카테고리 메뉴 */}\r\n      <div className={classes.categoryMenu}>\r\n        <Link to=\"/prod-list\">상품목록</Link>\r\n        <Link to=\"/category2\">카테고리 2</Link>\r\n        <Link to=\"/category3\">카테고리 3</Link>\r\n        <Link to=\"/category4\">카테고리 4</Link>\r\n      </div>\r\n      {/* 추천 상품 섹션 */}\r\n      <div className={classes.featuredProducts}>\r\n        <h2>추천 상품</h2>\r\n        {isLoading && <p>로딩 중...</p>}\r\n        {error && <p>{error}</p>}\r\n        {!isLoading && !error && (\r\n          <div className={classes.productList}>\r\n            {featuredProducts.map((product) => (\r\n              <div key={product.productCode} className={classes.productCard}>\r\n                <Link to={`/products/${product.productCode}`} className={classes.imageContainer}>\r\n                  <img src={product.productImg[0]} alt={product.productName} className={classes.productImage} />\r\n                </Link>\r\n                <div className={classes.productContent}>\r\n                  <h3 className={classes.productName}>{product.productName}</h3>\r\n                  <div className={classes.priceSection}>\r\n                    {product.rprice > 0 ? (\r\n                      <>\r\n                        <div className={classes.originalPrice}>{product.oprice.toLocaleString()} 원</div>\r\n                        <div className={classes.discountWrapper}>\r\n                          <span className={classes.discountPercentage}>\r\n                            {Math.round(((product.oprice - product.rprice) / product.oprice) * 100)}%\r\n                          </span>\r\n                          <span className={classes.salePrice}>{product.rprice.toLocaleString()} 원</span>\r\n                        </div>\r\n                      </>\r\n                    ) : (\r\n                      <div className={classes.salePrice}>{product.oprice.toLocaleString()} 원</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* 푸터 */}\r\n      <footer className={classes.footer}>\r\n        <p>© 2024 옷피셜. All rights reserved.</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"sTAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,WAArC,KAAwD,OAAxD,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,WAAP,KAAuB,cAAvB,CAAuC;AACvC,MAAOC,WAAP,KAAuB,kBAAvB,CAA2C;AAC3C,MAAOC,YAAP,KAAwB,yBAAxB,CACA,MAAOC,QAAP,KAAoB,uBAApB,CAA6C;6IAE7C,GAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjB,cAAgDP,QAAQ,CAAC,EAAD,CAAxD,wCAAOQ,gBAAP,eAAyBC,mBAAzB,eACA,eAAkCT,QAAQ,CAAC,KAAD,CAA1C,yCAAOU,SAAP,eAAkBC,YAAlB,eACA,eAA0BX,QAAQ,CAAC,IAAD,CAAlC,yCAAOY,KAAP,eAAcC,QAAd,eAEA,GAAMC,qBAAoB,CAAGb,WAAW,wEAAC,qLACvCU,YAAY,CAAC,IAAD,CAAZ,CACAE,QAAQ,CAAC,IAAD,CAAR,CAFuC,sCAIdT,WAAU,CAACW,aAAX,EAJc,QAI/BC,QAJ+B,oBAKjCA,QAAQ,CAACC,MAAT,CAAkB,GAAlB,EAAyBD,QAAQ,CAACC,MAAT,EAAmB,GALX,+BAM7B,IAAIC,MAAJ,CAAU,uBAAV,CAN6B,QAQ/BC,IAR+B,CAQxB,iBAAAH,QAAQ,CAACG,IAAT,wDAAeC,OAAf,GAA0B,EARF,CAUrC;AACMC,cAX+B,CAWdF,IAAI,CACxBG,MADoB,CACb,SAACC,OAAD,QAAaA,QAAO,CAACC,KAAR,GAAkB,MAA/B,EADa,CAC0B;AAD1B,CAEpBC,IAFoB,CAEf,SAACC,CAAD,CAAIC,CAAJ,QAAUA,EAAC,CAACH,KAAF,CAAUE,CAAC,CAACF,KAAtB,EAFe,CAEc;AAFd,CAGpBI,KAHoB,CAGd,CAHc,CAGX,CAHW,CAXc,CAcrB;AAEhB,GAAIP,cAAc,CAACQ,MAAf,GAA0B,CAA9B,CAAiC,CAC/B;AACApB,mBAAmB,CAACU,IAAI,CAACS,KAAL,CAAW,CAAX,CAAc,CAAd,CAAD,CAAnB,CACD,CAHD,IAGO,CACLnB,mBAAmB,CAACY,cAAD,CAAnB,CACD,CArBoC,iFAuBrCR,QAAQ,CAAC,YAAIiB,OAAJ,EAAe,0BAAhB,CAAR,CAvBqC,yBAyBrCnB,YAAY,CAAC,KAAD,CAAZ,CAzBqC,sGAAD,GA2BrC,EA3BqC,CAAxC,CA6BAZ,SAAS,CAAC,UAAM,CACde,oBAAoB,GACrB,CAFQ,CAEN,CAACA,oBAAD,CAFM,CAAT,CAIA,mBACE,aAAK,SAAS,CAAER,OAAO,CAACyB,aAAxB,wBAEE,KAAC,UAAD,IAFF,kBAIE,aAAK,SAAS,CAAEzB,OAAO,CAAC0B,MAAxB,wBACE,YAAK,SAAS,CAAE1B,OAAO,CAAC2B,OAAxB,EADF,cAEE,iGAFF,cAGE,YAAK,GAAG,CAAE5B,WAAV,CAAuB,GAAG,CAAC,iCAA3B,CAA6D,SAAS,CAAEC,OAAO,CAAC4B,WAAhF,EAHF,GAJF,cAUE,aAAK,SAAS,CAAE5B,OAAO,CAAC6B,YAAxB,wBACE,KAAC,IAAD,EAAM,EAAE,CAAC,YAAT,sCADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,YAAT,wCAFF,cAGE,KAAC,IAAD,EAAM,EAAE,CAAC,YAAT,wCAHF,cAIE,KAAC,IAAD,EAAM,EAAE,CAAC,YAAT,wCAJF,GAVF,cAiBE,aAAK,SAAS,CAAE7B,OAAO,CAACE,gBAAxB,wBACE,iDADF,CAEGE,SAAS,eAAI,6CAFhB,CAGGE,KAAK,eAAI,mBAAIA,KAAJ,EAHZ,CAIG,CAACF,SAAD,EAAc,CAACE,KAAf,eACC,YAAK,SAAS,CAAEN,OAAO,CAAC8B,WAAxB,UACG5B,gBAAgB,CAAC6B,GAAjB,CAAqB,SAACd,OAAD,qBACpB,aAA+B,SAAS,CAAEjB,OAAO,CAACgC,WAAlD,wBACE,KAAC,IAAD,EAAM,EAAE,qBAAef,OAAO,CAACgB,WAAvB,CAAR,CAA8C,SAAS,CAAEjC,OAAO,CAACkC,cAAjE,uBACE,YAAK,GAAG,CAAEjB,OAAO,CAACkB,UAAR,CAAmB,CAAnB,CAAV,CAAiC,GAAG,CAAElB,OAAO,CAACmB,WAA9C,CAA2D,SAAS,CAAEpC,OAAO,CAACqC,YAA9E,EADF,EADF,cAIE,aAAK,SAAS,CAAErC,OAAO,CAACsC,cAAxB,wBACE,WAAI,SAAS,CAAEtC,OAAO,CAACoC,WAAvB,UAAqCnB,OAAO,CAACmB,WAA7C,EADF,cAEE,YAAK,SAAS,CAAEpC,OAAO,CAACuC,YAAxB,UACGtB,OAAO,CAACuB,MAAR,CAAiB,CAAjB,cACC,wCACE,aAAK,SAAS,CAAExC,OAAO,CAACyC,aAAxB,WAAwCxB,OAAO,CAACyB,MAAR,CAAeC,cAAf,EAAxC,aADF,cAEE,aAAK,SAAS,CAAE3C,OAAO,CAAC4C,eAAxB,wBACE,cAAM,SAAS,CAAE5C,OAAO,CAAC6C,kBAAzB,WACGC,IAAI,CAACC,KAAL,CAAY,CAAC9B,OAAO,CAACyB,MAAR,CAAiBzB,OAAO,CAACuB,MAA1B,EAAoCvB,OAAO,CAACyB,MAA7C,CAAuD,GAAlE,CADH,OADF,cAIE,cAAM,SAAS,CAAE1C,OAAO,CAACgD,SAAzB,WAAqC/B,OAAO,CAACuB,MAAR,CAAeG,cAAf,EAArC,aAJF,GAFF,GADD,cAWC,aAAK,SAAS,CAAE3C,OAAO,CAACgD,SAAxB,WAAoC/B,OAAO,CAACyB,MAAR,CAAeC,cAAf,EAApC,aAZJ,EAFF,GAJF,GAAU1B,OAAO,CAACgB,WAAlB,CADoB,EAArB,CADH,EALJ,GAjBF,cAoDE,eAAQ,SAAS,CAAEjC,OAAO,CAACiD,MAA3B,uBACE,yEADF,EApDF,GADF,CA0DD,CAhGD,CAkGA,cAAehD,KAAf"},"metadata":{},"sourceType":"module"}